---
title: 网站被劫持……
slug: website-hijacked
pubDate: 2023-10-30
updatedDate: 2023-10-31
status: maintaining
description: 莫名其妙，早上起来居然发现我的网站被「劫持」了？
tags:
  - shudong
---

前段时间从 Firefox 切换到了 Chrome/Edge，因此有一段时间没用过 Firefox 了。今天早上修改样式的时候突然想到了 Firefox，便打算看看我的网站在 Firefox 上有没有什么问题。

于是我打开了 Firefox，在地址栏输入 `jinng.cn`，一敲回车——

啊？怎么还没加载出来？

啊？网站的标题怎么变成了「Waiting 1s」？

啊？怎么跳转到别的域名上去了？

啊？域名怎么又跳转了一次？

啊？啊？啊？怎么跳转到 xxxx app 下载网站上去了？

由于我的网站是一个静态站点，资源都是托管在对象存储上的（最近迁移到了 Cloudflare Pages 不过差别不大），存储、CDN、DNS 都背靠大厂，就一直没怎么注意过安全问题，开个 HTTPS 之后就没管过，结果网站直接被劫持了。可能是我平时用 Chrome/Edge，已经缓存的正确的解析，又可能是 Chrome/Edge 的安全策略较好，在 Chrome/Edge 里没有出现过解析被劫持的情况，要不是开了 Firefox 还发现不了这个问题。

又忽然想到微信和 QQ，想看看受到影响了没。分别在这两个软件里面发送我的网站的链接点开——「网页包含诱导分享、关注等诱导行为内容，被多人投诉，为维护绿色上网环境，已停止访问。」虽然我的网站没有「诱导分享、关注等诱导行为内容」，不过还是被屏蔽了：（

于是去配置 `DNSSEC` 和 `HSTS`，顺便去 Cloudflare 的面板逛一圈，把各种能打开的优化都打开。

由于这两天刚迁移到 Cloudflare Pages，`www.jinng.cn` 已经配置的正确的源站，但是 `jinng.cn` 的源站还在 `COS`，于是又去腾讯云修改了下 `CDN` 配置。

经过这一番折腾，网站的访问终于正常了。

也不知道为什么要劫持我的网站，明明没多少流量（

然后就是去微信和 QQ 申诉，让腾讯解封我的网站。QQ 的效率倒还挺高，过了几个小时就解决了，微信还没下文，目前还是被屏蔽的状态。

解决完劫持问题之后再用 Firefox，也确实发现了问题：`View Transitions`。`View Transitions` 似乎不能在 Firefox 上显示切换动画，而且页面切换十分卡顿，甚至会直接卡死——页面上所有链接都跳转不了。于是只能将 `View Transitions` 移除了，等有空的时候去 `GitHub` 上提个 `issue`，等这个问题修复之后再启用吧。

现在已经是 23:56 了，睡觉去了。还有些内容没写，明天再补充吧。
