---
title: 关于「树洞」的思考
slug: thoughts-on-shudong
pubDate: 2023-10-04
updatedDate: 2023-10-05
status: maintaining
description: 「树洞」目前已经奄奄一息了。如果再不重构，它就会变成一个垃圾场，存放各种毫无意义的文字。这篇文章是我对于「树洞」重构的思考。
tags:
  - thoughts
  - shudong
---

## WordPress 时期的思考

### 初中时期

你所访问的这个网站，最开始的时候并不叫「鲸鱼的树洞」。我最早搭建的网站名字大概是叫「RUAKIO」，当时我还是初中，买了一台 VPS 之后使用 WordPress 搭建了它。「RUAKIO」这个名字没有什么意义，就如那个网站本身一样。当时我的想法就是搭建一个技术向博客。失败的原因从主要到次要有以下三点：

1. 没有技术力支撑。
2. 没有持续的产出。
3. 经济问题。

当时的我只认识到了经济问题，并且认为经济问题是维护「RUAKIO」最大的问题。一个初二/初三的学生妄想做一个技术向博客，结果可想而知。在这种情况下，我搭建了一坨典型的互联网垃圾：

1. 第一篇文章就是「如何使用 WordPress 搭建一个博客」云云。
2. 之后几篇文章都是从 CSDN/别人的博客东拼西凑扒来的，内容都与「折腾网站时 MySQL/Nginx 报错了」有关。
3. 过了几天之后就不再更新文章。
4. 文章想不出来怎么写，主题样式换的倒是挺快。
5. 最后主题也懒得换了。
6. 没钱续费 VPS，网站消失。

### 高中时期

到了高中，我又开始蠢蠢欲动起来。买过三四个不同的 VPS，不断地重复以上六个步骤。最后大概是因为经济原因买了 GoDaddy 的 10 刀虚拟主机，又由于这个虚拟主机的网络太差，放弃了 WordPress 而终结了这样的循环。

## 静态网站时期的思考

之后我又转向了静态网站。大概可以分为三个时期。

### Hexo 时期

大致是 2021 年。这一年里实际上没有什么有意义的文章，唯一一篇比较好的就是「Debian 11 “bullseye” 配置指南」了。

### hugo 时期

大致是 2021 年末到 2023 年 9 月初。换到 hugo 的主要原因是 npm 的包依赖实在太抽象了，node_modules 占了一大坨，更新还天天给我报错。而 hugo 就小巧可爱多了，就一个二进制包。在这段时期中，「高中生物中出现的各种试剂」「在 hugo 中异步加载 Google Analytics」「什么是克拉香天气」这几篇文章还是比较有意义的。「高中生物中出现的生物学史」没写完，不过也不算太可惜，毕竟 22 年高考真没考生物学史。有趣的是这几篇文章都是高中时期完成的。到了大学之后反而一篇有意义的文章都没写出来。

### Astro 时期

大概是从不到一个月之前开始的。由于学了数学专业，会写一些数学相关的内容，自然就会用到 LaTeX。而 hugo 对于 LaTeX 的支持很烂，使用体验非常差劲，便换到了 Astro。优点是非常活跃、设计理念非常先进。我在 Astro 还在测试的时候就看到它了，也看着 Astro 发布了正式版。但当时还不需要 LaTeX，没有切换的动力。现在有对 LaTeX 的强烈需求，换掉 hugo 也就顺利成章了。但 Astro 的缺点就是 node.js。昨天更新包的时候已经开始出现漏洞了。不过考虑到它的优点，就忍着吧。这几天我对「树洞」的结构进行了大规模的重构，重构到妈都认不出来的那种，但是还没有构建网站。

## 「树洞」设想

「树洞」的设想从提出到现在大约有一年了。用一句话来描述「树洞」就是「堆放我的各种想法的地方」。

### 「树洞」最初的结构

在过去，「树洞」主要分为了两大部分：「文章」和「日记」。文章中是相对正式的内容，而日记中则是相对随意的内容。主要问题在于「割裂感」和「模糊性」。

#### 割裂感

「文章」和「日记」中文字的区别巨大。

以下是我从「文章」「在 hugo 中异步加载 Google Analytics」中截取的片段：

---

实际上，我并没有选择 Google Analytics，而是在我的博客中加载了 Cloudflare Web Analytics。一来是因为 Cloudflare 的加载的 js 更小，二来是 Cloudflare 的面板更简洁，没有那么多我不需要的数据。

尽管和 gtag.js 或者 analytics.js 比起来，Cloudflare 引入的 js 经过 gzip 压缩之后仅有 5.51kb，但是 Cloudflare 在国内的响应速度实在不敢恭维。加载这个 js，让本就很慢的网站更是雪上加霜。

[Sukka](https://skk.moe) 的这篇文章「[使用 Cloudflare Workers 加速 Google Analytics](https://blog.skk.moe/post/cloudflare-workers-cfga/)」早就看过，但没有细看。最近在看 Sukka 的其它文章时又看到了这篇文章。其使用的 cfga.js 不仅可以使用 jsdelivr 加速，大小也只有 1kb，便决定使用 cfga。

---

而以下是我写的一篇「日记」：

---

**2022 年 2 月 27 日星期日，倒数第 100 天**

- 整理了 [克拉香天气](https://www.jinng.cn/wenzhang/shenme-shi-kelaxiang-tianqi/)

**2022 年 2 月 28 日星期一，倒数第 99 天**

- 网课是真的累，比学校还累

**2022 年 3 月 1 日星期二，倒数第 98 天**

- 网课
- 做了点物理
- marxist.red

---

「日记」中的内容说的好听一点就是语言比较简单随意，说的难听一点就是垃圾，根本没有阅读的欲望。我自己都懒得看日记中的内容。

#### 模糊性

实际上，「日记」中的内容也并不都想上面那样。

这是我从「日记」「Install Windows Again」中截取的片段：

---

##### 超虚拟分辨率

macOS 就是通过渲染 4 倍的像素然后像素四合一做到优秀的字体渲染的。实际上，在 Windows 下也能做到类似的操作。我的显卡是 AMD RX6700S，在 AMD Software 中开启超虚拟分辨率之后在设置里把显示器分辨率拉到 4K 即可。开启后会渲染 4K 并缩放到 2.5K 显示，字体渲染会清晰不少。可惜的是虚拟分辨率的上限为 4K，不能再拉高了。4K 缩放到 2.5K 时像素不能完美四合一，要是能虚拟到 5K 就完美了。Intel 和 Nvidia 的显卡也有类似的设置，自行搜索即可。

缺点是开游戏的时候要把分辨率手动调回屏幕分辨率，否则性能损耗就太大了。同时，在切出游戏时也并不完美。如果虚拟分辨率设置为 4K，游戏分辨率为 2.5K 并全屏，在切出游戏时 Windows 会经历一个重新缩放的过程，可能会伴随短暂黑屏，各种最大化的窗口大小也会出现异常。

##### Windhawk

在 Windhawk 里面可以装各种插件调教 Windows。我安装了 Slick Window Arrangement 和 Taskbar Volume Control。前者可以为窗口移动添加一个非线性动画，后者可以在任务栏上滚动滚轮来调整音量。

##### Mactype

Mactype 算是一款老牌字体渲染优化软件了。实测开启 Mactype 对字体渲染的提升优于超虚拟分辨率。两者可以同时开启，进一步提升效果。尽管 Mactype 已经很久没有更新了（实际上在 Github 有较新的测试版，但是 Windows Defender 会报毒），但仍旧可以正常使用。以服务模式载入时使用基本无感，系统托盘里没有图标。

---

这篇「日记」实际上完全可以算作是「文章」，但却被放在了「日记」分类中，原因是其开头是由我自己重装 Windows 系统这件事引出，属于日常生活。

### 「树洞」现在的结构

这两天我对「树洞」进行了一次重构。树洞分为了「日记本」「数学书」「绘画室」「钢笔盒」「游戏房」这五个分区。然而这样的结构仍然是有问题的。主要问题如下：

1. 「日记本」质量低下。「日记本」本质上就是原来的「日记」剔除掉有意义的文章。本来「日记」中内容的质量就很差了，现在变得更加糟糕。
2. 「数学书」「绘画室」「钢笔盒」「游戏房」中内容过少。能够划分到这些分类下的文章最多就两三篇，不足以支撑起一个分区。
3. 向后扩展性差。假设将来某一天我心血来潮写了一篇有关「摄影」的文章，并且由于是心血来潮，我之后可能再也不会写有关「摄影」的内容了。那么这篇文章应该放在哪个分区？似乎哪个分区都不适合。那我这篇文章放哪？总不能为了这一篇文章而新建一个分区吧。
4. 向前扩展性差。以我高中时期写的「高中生物中出现的各种试剂」这篇文章为例，我又该把它放在哪里？总不能单独为它建立一个分区，也不能直接把它删了吧。

种种问题说明这样的分区模式并不合适，因此，我开始了对「树洞」的又一次重构。

### 「树洞」未来的结构

接下来我会详细叙述我对「树洞」结构的再次重构，以及为什么要这样做，~~防止哪天我忘了~~。

#### 所有内容通过时间进行索引

既然进行分区并不合理，那就干脆不分区了，而是直接以创建时间索引所有内容。好处有以下几点：

1. URL 非常简洁。在过去，我用标题的拼音作为 URL。因此，每篇文章的文件名也都是标题的拼音。而以时间为索引，可以直接用日期作为 URL，例如 /2023-10-04。
2. 拼音的可读性极差，短一些的 pinyin 还好，chang-yixie-de-pinyin-de-kedu-xing-shizai-shi-taicha-le。换成日期一看就懂了。
3. 一旦文章多了起来，编辑器里的列表里面密密麻麻的拼音根本就看不懂，找篇文章还要把拼音一个个念一遍，再猜一下音调。不如直接把文件名全都改成日期，以文件名排序。
4. 各种内容的文章都可以堆放在这里，不用专门建立分区，很符合我对「树洞」的想象。

#### 通过 tag 标记文章

以时间为索引的缺点是文章之间的逻辑关联较差。因此加入 tag，关联相同主题的文章。

#### 在部分内容成熟之后建立子站

我前几天将树洞重构为「日记本」「数学书」「绘画室」「钢笔盒」「游戏房」五个分区的目的是让「树洞」成为一个我的知识管理库。但是目前，「树洞」中的知识积累还太少。等到部分 tag 下的文章足够多、足够专业，我会将这些内容整理一下，然后发布到一个子站中。例如当「水彩」这个 tag 下的文章足够多时，我可能会将这些文章整合一下，然后新建一个名为「鲸鱼的水彩」的子站专门放这些内容。当然，内容的创作还是在「树洞」内的。每一篇文章我都会先在「树洞」中发布，然后定期整理文章，将部分内容复制到像「鲸鱼的水彩」这样的子站中。

## 总结

目前重构还在进行之中，具体的细节还未确定。最重要的是希望我能坚持下去：）
